\NeedsTeXFormat{LaTeX2e}%
\ProvidesPackage{mnedefault}%
              [2004/12/22 v0.9 the report environment by M.Nelson]%
\usepackage{mnemacros}
\usepackage{default_def}
%Seitengrösse einstellen
%
\oddsidemargin-1in%
\evensidemargin-1in%
\advance\oddsidemargin by 30mm
\advance\evensidemargin by 30mm
\topmargin-1in%
\advance\topmargin by 15mm%
\headheight15mm%
\headsep18mm%
\textheight222mm%
\textwidth165mm%
\footskip10mm%
\parindent0pt%
%\footheight20mm%
\DeclareOption{landscape}
{%
  \textheight136mm%
  \textwidth241mm%
  \special{pdf: pagesize width 296mm height 210mm}%
}
\ProcessOptions
%
% Standardschrift ändern
%\renewcommand{\rmdefault}{cmss}
%
\def\mnedefaulttitle{\variable[Report]{reptitle}}
\def\ps@firstmnedefault{\let\@mkboth=\markboth%
    \def\@evenhead{{\if\checkvariable{watermark}1\watermarkred{\watermark}\fi}%
                  \setbox0=\vbox{\vskip4pt\hbox{\hskip4pt\huge\bf\mnedefaulttitle}\vskip4pt}
                  \setbox1=\vbox{\hbox{\@firstlogo\@firstname}\vskip4pt}%
                  \dimen0=\textwidth\advance\dimen0 by -\wd0%
                   \hbox{\vbox{\hbox to \dimen0{\box1\hfill}\hrule}}%
                   \hbox{\vrule\vbox{\hrule\vskip2pt\hbox to \wd0{\box0}}}}%
    \def\@evenfoot{\thepage\hfill}%
    \def\@oddhead{{\if\checkvariable{watermark}1\watermarkred{\watermark}\fi}%
                  \setbox0=\vbox{\vskip4pt\hbox{\huge\bf\mnedefaulttitle\hskip4pt}\vskip4pt}
                  \setbox1=\vbox{\hbox{\@firstname\@firstlogo}\vskip4pt}%
                  \dimen1=\textwidth\advance\dimen1 by -\wd0%
                  \message{\the\dimen1 \the\wd1}
                   \ifdim\wd1 > \dimen1%
                    \setbox0=\vbox{\vskip4pt\hbox{\Large\bf\mnedefaulttitle\hskip4pt}\vskip4pt}
                    \dimen1=\textwidth\advance\dimen1 by -\wd0%
                  \fi
                  \message{\the\dimen1 \the\wd1}
                  \ifdim\wd1 > \dimen1%
                    \setbox0=\vbox{\vskip4pt\hbox{\large\bf\mnedefaulttitle\hskip4pt}\vskip4pt}
                    \dimen1=\textwidth\advance\dimen1 by -\wd0%
                  \fi
                  \message{\the\dimen1 \the\wd1}
                  \ifdim\wd1 > \dimen1%
                    \setbox0=\vbox{\vskip4pt\hbox{\normalsize\bf\mnedefaulttitle\hskip4pt}\vskip4pt}
                    \dimen1=\textwidth\advance\dimen1 by -\wd0%
                  \fi
                   \hbox{\vbox{\hrule\vskip2pt\hbox to \wd0{\box0}}\vrule}%
                   \hbox{\vbox{\hbox to \dimen1{\hfill\box1}\hrule}}}%
    \def\@oddfoot{\hfill\thepage}%
}%
\def\ps@mnedefault{\let\@mkboth=\markboth%
    \def\@evenhead{\vbox{\hbox to \textwidth{\thepage\hfill\bf\mnedefaulttitle}\vskip4pt\hrule}}%
    \def\@evenfoot{\vbox{\hrule\hbox to \textwidth{\@logo\@name\hfill}}}%
    \def\@oddhead{\vbox{\hbox to \textwidth{\bf\mnedefaulttitle\hfill\rm\thepage}\vskip4pt\hrule}}%
    \def\@oddfoot{\vbox{\hrule\hbox to \textwidth{\hfill\@name\@logo}}}%
}%
